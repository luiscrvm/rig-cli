# Docker Configuration

This Docker configuration was generated by Rig CLI for your devops-cli.

## Quick Start

### Development

```bash
# Build and start all services
docker-compose up --build

# Run in background
docker-compose up -d

# View logs
docker-compose logs -f app

# Stop services
docker-compose down
```

### Production

```bash
# Build production image
docker build -f Dockerfile.prod -t devops-cli:latest .

# Tag for GCP Container Registry (if using GCP)
docker tag devops-cli:latest gcr.io/aibrandedbooth/devops-cli:latest

# Push to registry
docker push gcr.io/aibrandedbooth/devops-cli:latest

# Run production container
docker run -p 8080:8080 devops-cli:latest
```

## Services

- **app**: Main application container


## Environment Variables

Copy `.env.example` to `.env` and customize:

- `NODE_ENV`: Environment (development/production)
- `LOG_LEVEL`: Logging level


## Health Checks

All containers include health checks:
- **Interval**: 30 seconds
- **Timeout**: 3 seconds  
- **Retries**: 3 attempts

Check container health:
```bash
docker-compose ps
```

## Development Features

- **Hot reload**: Code changes trigger automatic reload
- **Volume mounting**: Local code is mounted for development
- **Debug ports**: Available for debugging (if applicable)

## Production Optimizations

- Multi-stage builds for smaller images
- Non-root user for security
- Health checks for reliability
- Optimized layer caching

## Troubleshooting

### Common Issues

1. **Port already in use**:
   ```bash
   docker-compose down
   # or change port in docker-compose.yml
   ```

2. **Permission denied**:
   ```bash
   sudo docker-compose down
   sudo chown -R $USER:$USER .
   ```

3. **Out of disk space**:
   ```bash
   docker system prune -a
   ```

### Useful Commands

```bash
# Rebuild specific service
docker-compose build app

# Execute command in running container
docker-compose exec app bash

# View container resource usage
docker stats

# Remove all containers and volumes
docker-compose down -v --remove-orphans
```

## Generated by Rig CLI

This Docker configuration was automatically generated by Rig CLI.
- Run `rig generate docker` to regenerate
- Run `rig generate kubernetes` to create K8s manifests
- Run `rig security --scan` to check for security issues
